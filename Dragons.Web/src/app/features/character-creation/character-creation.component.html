<div class="creation-container">
  <header class="creation-header">
    <a routerLink="/" class="back-link">â† Retour</a>
    <h1>ğŸ‰ CrÃ©ation de personnage</h1>
    <button class="reset-btn" (click)="onReset()">ğŸ”„ Recommencer</button>
  </header>

  <nav class="stepper" aria-label="Progression de la crÃ©ation">
    @for (step of steps; track step.number) {
    <div
      class="step"
      [class.active]="creationService.currentStep() === step.number"
      [class.completed]="creationService.currentStep() > step.number"
      [class.clickable]="step.number <= creationService.currentStep()"
      (click)="
        step.number <= creationService.currentStep() ? creationService.goToStep(step.number) : null
      "
      [attr.aria-current]="creationService.currentStep() === step.number ? 'step' : null"
    >
      <div class="step-icon">
        @if (creationService.currentStep() > step.number) {
        <span>âœ“</span>
        } @else {
        <span>{{ step.icon }}</span>
        }
      </div>
      <span class="step-title">{{ step.title }}</span>
    </div>

    @if (step.number < steps.length) {
    <div
      class="step-connector"
      [class.completed]="creationService.currentStep() > step.number"
    ></div>
    } }
  </nav>

  <main class="step-content">
    @switch (creationService.currentStep()) { @case (1) { <app-species-step /> } @case (2) {
    <app-civilization-step /> } @case (3) { <app-class-step /> } @case (4) {
    <app-abilities-step /> } @case (5) { <app-skills-step /> } @case (6) { <app-equipment-step /> }
    @case (7) { <app-languages-step /> } @case (8) { <app-identity-step /> } @case (9) {
    <app-summary-step /> } }
  </main>

  <footer class="creation-footer">
    <button
      class="nav-btn prev"
      [disabled]="creationService.currentStep() === 1"
      (click)="creationService.previousStep()"
    >
      â† PrÃ©cÃ©dent
    </button>

    <span class="step-indicator">
      Ã‰tape {{ creationService.currentStep() }} / {{ creationService.totalSteps }}
    </span>

    @if (creationService.currentStep() < creationService.totalSteps) {
    <button
      class="nav-btn next"
      [disabled]="!creationService.isCurrentStepValid()"
      (click)="creationService.nextStep()"
    >
      Suivant â†’
    </button>
    } @else {
    <button
      class="nav-btn finish"
      [disabled]="!creationService.isCurrentStepValid()"
      (click)="finishCreation()"
    >
      ğŸ‰ Terminer
    </button>
    }
  </footer>
</div>
