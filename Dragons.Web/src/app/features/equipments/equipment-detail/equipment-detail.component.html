<div class="equipment-detail-page no-scrollbar">
  <div class="page-header">
    <a routerLink="/compendium/equipment" class="back-btn">â† Retour Ã  l'Ã©quipement</a>
  </div>

  @if (loading) {
  <div class="loading">
    <div class="spinner"></div>
    <span>Recherche dans l'arsenal...</span>
  </div>
  } @else if (equipment) {

  <header class="equip-hero" [class]="getTypeTheme(equipment.type)">
    <div class="hero-content">
      <span class="equip-icon">{{ getTypeIcon() }}</span>
      <div class="equip-info">
        <h1>{{ equipment.name }}</h1>
        <div class="hero-badges">
          <span class="badge type">{{ equipment.type }}</span>
          <span class="badge subtype">{{ equipment.subtype }}</span>
        </div>
      </div>
    </div>
  </header>

  <div class="detail-grid">
    <div class="left-col">
      <section class="detail-card stats-summary">
        <div class="stat-row">
          <div class="mini-stat">
            <span class="label">CoÃ»t</span>
            <span class="value gold">{{ formatCost() }}</span>
          </div>
          @if (equipment.weightKg > 0) {
          <div class="mini-stat">
            <span class="label">Poids</span>
            <span class="value">{{ equipment.weightKg }} kg</span>
          </div>
          }
        </div>

        @if (hasWeaponDamage()) {
        <hr class="divider" />
        <div class="stat-row">
          <div class="mini-stat">
            <span class="label">DÃ©gÃ¢ts</span>
            <span class="value damage">{{ getWeaponData()!.damage_dice }}</span>
          </div>
          <div class="mini-stat">
            <span class="label">Type</span>
            <span class="value">{{ getWeaponData()!.damage_type }}</span>
          </div>
        </div>
        } @if (hasArmorData()) {
        <hr class="divider" />
        <div class="stat-row">
          <div class="mini-stat">
            <span class="label">Classe d'Armure</span>
            <span class="value ac">{{ getArmorClassDisplay() }}</span>
          </div>
        </div>

        @if (getArmorData()!.str_requirement && getArmorData()!.str_requirement! > 0) {
        <div class="stat-row warning">
          <span
            >ğŸ’ª Force min. requise : <strong>{{ getArmorData()!.str_requirement }}</strong></span
          >
        </div>
        } @if (getArmorData()!.stealth_disadvantage) {
        <div class="stat-row warning">
          <span>ğŸ¤« DÃ©savantage DiscrÃ©tion</span>
        </div>
        } } @if (hasMountData()) {
        <hr class="divider" />
        <div class="stat-row">
          <div class="mini-stat">
            <span class="label">Vitesse</span>
            <span class="value speed">{{ getMountData()!.speed }}</span>
          </div>
          <div class="mini-stat">
            <span class="label">Charge</span>
            <span class="value">{{ getMountData()!.carry_capacity_kg }} kg</span>
          </div>
        </div>
        }
      </section>
    </div>

    <div class="right-col">
      @if (hasWeaponProperties()) {
      <section class="detail-card properties">
        <h2>ğŸ“‹ PropriÃ©tÃ©s</h2>
        <div class="tags-list">
          @for (prop of getWeaponData()!.properties; track prop) {
          <span class="tag prop">{{ prop }}</span>
          }
        </div>
      </section>
      } @if (hasGearDescription()) {
      <section class="detail-card description">
        <h2>ğŸ“– Description</h2>
        <p>{{ getGearData()!.description }}</p>
      </section>
      } @if (hasToolDescription()) {
      <section class="detail-card description">
        <h2>ğŸ”§ Usage</h2>
        <p>{{ getToolData()!.description }}</p>
      </section>
      } @if (isMount() && getMountData()?.description) {
      <section class="detail-card description">
        <h2>ğŸ Traits</h2>
        <p>{{ getMountData()!.description }}</p>
      </section>
      }
    </div>
  </div>

  } @else {
  <div class="error-state">
    <h2>Objet introuvable</h2>
    <a routerLink="/compendium/equipment" class="btn btn-primary">Retour Ã  la liste</a>
  </div>
  }
</div>
